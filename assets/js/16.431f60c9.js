(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{214:function(t,e,a){"use strict";a.r(e);var r=a(0),l=Object(r.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"docker配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker配置","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker配置")]),t._v(" "),a("h2",{attrs:{id:"基本命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本命令","aria-hidden":"true"}},[t._v("#")]),t._v(" 基本命令")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命 令")]),t._v(" "),a("th",[t._v("用 途")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("docker pull")]),t._v(" "),a("td",[t._v("获取image")])]),t._v(" "),a("tr",[a("td",[t._v("docker build")]),t._v(" "),a("td",[t._v("创建image")])]),t._v(" "),a("tr",[a("td",[t._v("docker images")]),t._v(" "),a("td",[t._v("列出image")])]),t._v(" "),a("tr",[a("td",[t._v("docker image rm")]),t._v(" "),a("td",[t._v("删除image")])]),t._v(" "),a("tr",[a("td",[t._v("docker run")]),t._v(" "),a("td",[t._v("运行\bcomtainer")])]),t._v(" "),a("tr",[a("td",[t._v("docker ps")]),t._v(" "),a("td",[t._v("列出container")])]),t._v(" "),a("tr",[a("td",[t._v("docker container stop")]),t._v(" "),a("td",[t._v("\b停止container")])]),t._v(" "),a("tr",[a("td",[t._v("docker tag")]),t._v(" "),a("td",[t._v("设置镜像TAG")])]),t._v(" "),a("tr",[a("td",[t._v("docker push")]),t._v(" "),a("td",[t._v("上传镜像到docker仓库")])])])]),t._v(" "),a("h2",{attrs:{id:"dockerfile-语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-语法","aria-hidden":"true"}},[t._v("#")]),t._v(" Dockerfile 语法")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命 令")]),t._v(" "),a("th",[t._v("用 途")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("\bFROM")]),t._v(" "),a("td",[t._v("基于image")])]),t._v(" "),a("tr",[a("td",[t._v("RUN")]),t._v(" "),a("td",[t._v("执行命令")])]),t._v(" "),a("tr",[a("td",[t._v("ADD")]),t._v(" "),a("td",[t._v("添加文件")])]),t._v(" "),a("tr",[a("td",[t._v("COPY")]),t._v(" "),a("td",[t._v("拷贝文件")])]),t._v(" "),a("tr",[a("td",[t._v("CMD")]),t._v(" "),a("td",[t._v("执行控制台命令")])]),t._v(" "),a("tr",[a("td",[t._v("EXPOSE")]),t._v(" "),a("td",[t._v("暴露端口")])]),t._v(" "),a("tr",[a("td",[t._v("WORKDIR")]),t._v(" "),a("td",[t._v("指定路径")])]),t._v(" "),a("tr",[a("td",[t._v("MAINTAINER")]),t._v(" "),a("td",[t._v("维护者")])]),t._v(" "),a("tr",[a("td",[t._v("ENV")]),t._v(" "),a("td",[t._v("指定环境变量")])]),t._v(" "),a("tr",[a("td",[t._v("ENTRYPOINT")]),t._v(" "),a("td",[t._v("容器入口")])]),t._v(" "),a("tr",[a("td",[t._v("USER")]),t._v(" "),a("td",[t._v("指定用户")])]),t._v(" "),a("tr",[a("td",[t._v("VOLUME")]),t._v(" "),a("td",[t._v("mount point\b")])])])]),t._v(" "),a("h2",{attrs:{id:"docker-入门案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-入门案例","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker \b入门案例")]),t._v(" "),a("ul",[a("li",[t._v("\b\b下载依赖镜像："),a("code",[t._v("docker pull tomcat")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker pull tomcat\nUsing default tag: latest\nlatest: Pulling from library/tomcat\ncc1a78bfd46b: Pull complete\nd2c05365ee2a: Pull complete\n231cb0e216d3: Pull complete\nda23e1e20eae: Pull complete\n9d809d99b239: Pull complete\n10c61bb6d245: Pull complete\n50578eb745b9: Pull complete\n85082b9ab294: Pull complete\nd34391598837: Pull complete\nDigest: sha256:22263c7c58e5397b29d02f88e39e7f2e18943f5bce6682be66f2298afee75769\nStatus: Downloaded newer image for tomcat:latest\nd34391598837: Download complete\n")])])]),a("ul",[a("li",[t._v("查看镜像"),a("code",[t._v("docker images")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\ntomcat              latest              61205f6444f9        11 days ago         467MB\n")])])]),a("ul",[a("li",[t._v("启动镜像（生成容器）"),a("code",[t._v("docker run")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker run -p 8888:8080 -d tomcat\n296ad741e01b5146050b5ef359c61e704e89f035687d1aacd5e051827d3aad5a\n")])])]),a("ul",[a("li",[t._v("查看运行容器 "),a("code",[t._v("docker ps")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('> docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                    NAMES\n296ad741e01b        tomcat              "catalina.sh run"   4 minutes ago       Up 4 minutes        0.0.0.0:8888->8080/tcp   elastic_davinci\n')])])]),a("ul",[a("li",[a("span",{attrs:{id:"gc"}},[t._v("进入容器")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker exec -it 296ad741e01b bash\nroot@296ad741e01b:/usr/local/tomcat#\nroot@296ad741e01b:/usr/local/tomcat# pwd\n/usr/local/tomcat\nroot@296ad741e01b:/usr/local/tomcat# exit\nexit\n")])])]),a("ul",[a("li",[t._v("\b停止容器 "),a("code",[t._v("docker stop")])])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker stop 296ad741e01b\n296ad741e01b\n")])])]),a("h2",{attrs:{id:"构建自己的镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建自己的镜像","aria-hidden":"true"}},[t._v("#")]),t._v(" 构建自己的镜像")]),t._v(" "),a("ul",[a("li",[t._v("新建\b "),a("code",[t._v("Dockerfile")]),t._v(" 文件：")])]),t._v(" "),a("blockquote",[a("p",[t._v("依赖tomcat镜像，拷贝\bwar包到\bwebapps下，查看tomcat镜像webapps路径方式参考 "),a("a",{attrs:{href:"#gc"}},[t._v("进入容器")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("FROM tomcat\nMAINTAINER xwine\nCOPY jpress.war /usr/local/tomcat/webapps\n")])])]),a("ul",[a("li",[t._v("构建镜像")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> docker build -t jpress:latest .\nSending build context to Docker daemon  20.81MB\nStep 1/3 : FROM tomcat\n ---\x3e 61205f6444f9\nStep 2/3 : MAINTAINER xwine\n ---\x3e Using cache\n ---\x3e b69cc1bea65f\nStep 3/3 : COPY jpress.war /usr/local/tomcat/webapps\n ---\x3e Using cache\n ---\x3e 91b788fb5b7c\nSuccessfully built 91b788fb5b7c\nSuccessfully tagged jpress:latest\n")])])])])}),[],!1,null,null,null);e.default=l.exports}}]);